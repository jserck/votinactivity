webpackJsonp([0],{"162o":function(t,e,s){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(n.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new a(n.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},s("mypn"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,s("DuR2"))},BupW:function(t,e,s){"use strict";Vue.directive("preload",{inserted:function(t,e){t.style.background="#ffd8a1";var s=document.createElement("img");s.style.display="none",s.onload=function(){t.style.backgroundImage="url("+e.value+")",document.body.removeChild(s)},document.body.appendChild(s),s.src=e.value}})},DuR2:function(t,e){var s;s=function(){return this}();try{s=s||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(s=window)}t.exports=s},"JFT+":function(t,e){},ZJdd:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("bIjU"),s("Zi8N"),s("BupW"),s("162o");var i={components:{StarBook:function(){return new Promise(function(t){t()}).then(s.bind(null,"bIjU"))},Dialog:function(){return s.e(10).then(s.bind(null,"VR0t"))}},data:function(){return{myVoteData:{userTicketCount:null},userId:this.$route.query.userId||1,starSoltData:[],dialogOpations:{},dialogType:0,isShowDialog:!1,isFollow:this.$route.query.followed||"2",isclosefollow:!1,isCanVote:!1,isAutoSignIn:!1,invitorId:this.$route.query.invitorId||"",starId:0,nums:1,isFirst:!1,personCount:0,bookCount:0,isHttp:!0,timer:null}},created:function(){alert("1"),this.shareInfoChange(),this.postTitle(),this.voteInit(),this.timerHandler()},beforeDestroy:function(){clearInterval(this.timer)},computed:{userTicketCount:function(){return this.myVoteData.userTicketCount||0},shareCount:function(){return this.myVoteData.shareCount||0},starSoltData2:function(){return this.starSoltData}},methods:{shareInfoChange:function(){try{my.postMessage({event:"shareInfoChange",data:{title:"投票活动",desc:"投票活动",content:"投票活动",imageUrl:"https://img.dz19.net/forum/201901/04/132545icn959e8xnqxebjn.jpg",bgImgUrl:""}})}catch(t){}},postTitle:function(){try{my.postMessage({action:"setNavigationBar",data:{title:"投票活动页",backgroundColor:""}})}catch(t){}},timerHandler:function(){clearInterval(this.timer),this.timer=setInterval(this.getStarSolt,5e3)},voteInit:function(){this.getStarSolt(),this.getMyVote()},dialogClose:function(){this.nums=0,this.isShowDialog=!1},voteNumChange3:function(t){this.nums=t},getStarSolt:function(){var t=this;this.$http({urls:"/starRankingInfo",data:{},methods:"post",types:1,des:!1}).then(function(e){200===e.data.code&&(t.starSoltData=e.data.data.starList,t.personCount=e.data.data.personCount,t.bookCount=e.data.data.bookCount)}).catch(function(t){})},getMyVote:function(){var t=this;if(this.isHttp){var e={urls:"/user/myInfo/"+this.userId+"/"+this.isFollow,data:{userId:this.userId,isFollow:this.isFollow},methods:"post",types:1,des:!1};this.$http(e).then(function(e){t.isHttp=!0,200===e.data.code&&(t.myVoteData=e.data.data,t.isCanVote=e.data.data.userTicketCount>0,t.isFirst=e.data.data.isFirst,t.isSignIn=e.data.data.isSignIn,t.isAutoSignIn=e.data.data.isAutoSignIn,1==t.isFirst&&t.saveBooks(1))}).catch(function(t){})}},saveBooks:function(t){var e=this,s={urls:"/user/getBook/"+this.userId+"/"+t,data:{userId:this.userId,type:t},methods:"post",types:1,des:!1};this.$http(s).then(function(s){if(200===s.data.code)if(1===t){if(!s.data.data.id)return;e.dialogShow(1,!0,{type:t,bookId:s.data.data.id,bookPicUrl:s.data.data.img,bookName:s.data.data.name,bookWebUrl:s.data.data.bookWebUrl,isSignIn:e.isAutoSignIn})}else e.dialogShow(1,!0,{type:t,bookId:s.data.data.id,bookPicUrl:s.data.data.img,bookName:s.data.data.name,bookWebUrl:s.data.data.bookWebUrl,nums:e.nums,userTicketCount:e.userTicketCount})}).catch(function(t){})},getTicket:function(t){var e=this,s={urls:"/user/getTicket/"+this.userId+"/"+t,data:{userId:this.userId,type:t},methods:"post",types:1,des:!1};this.$http(s).then(function(s){200==s.data.code?(e.userTicketCountChange(1),1===t&&(e.isFollow=1,e.dialogShow(4,!0)),2===t&&(e.isSignIn=!0,e.dialogShow(7,!0))):17==s.data.code?e.$toast("已关注"):18==s.data.code?e.$toast("今日已签到"):19==s.data.code&&e.$toast("今日已达上限")}).catch(function(t){})},setVote:function(){var t=this,e={urls:"/user/vote",data:{userId:this.userId,starId:this.starId,nums:this.nums},methods:"post",types:1,des:!1,responseType:1};this.$http(e).then(function(e){200==e.data.code?(t.userTicketCountChange(0),t.isShowDialog=!1,t.saveBooks(2),t.dialogShow(8,!0,{nums:t.nums}),t.getStarSolt()):1003==e.data.code?t.$toast("当前投票人数过多!"):1002==e.data.code&&t.$toast("投票未成功!")}).catch(function(t){})},userTicketCountChange:function(t){t?this.myVoteData.userTicketCount+=10:this.myVoteData.userTicketCount-=this.nums},attentionHandler:function(){try{my.postMessage({event:"followApp",data:{}})}catch(t){return}this.getTicket(1)},obshareHandler:function(){try{my.postMessage({event:"shareApp",data:{title:"投票活动",desc:"投票活动",content:"投票活动",imageUrl:"https://img.dz19.net/forum/201901/04/132545icn959e8xnqxebjn.jpg",bgImgUrl:""}})}catch(t){return}this.getTicket(3)},sugnInHandler:function(){this.getTicket(2)},readHandler:function(){try{console.log("booklist"),my.postMessage({event:"navigatorTo",data:{path:"/booklist",query:{}}})}catch(t){}},voteClick:function(t){1===t?this.attentionHandler():2===t?this.sugnInHandler():3===t?this.obshareHandler():this.readHandler()},dialogListenEvent:function(t){switch(t.type){case 1:"dialogComponentEvent"==t.eventType&&(this.isShowDialog=!1);break;case 2:case 3:break;case 4:"dialogComponentEvent"==t.eventType&&(this.isShowDialog=!1);break;case 5:"dialogComponentEvent"==t.eventType&&this.setVote(),"goRule"==t.eventType&&(this.isShowDialog=!1);break;case 6:break;case 7:case 8:"dialogComponentEvent"==t.eventType&&(this.isShowDialog=!1)}},doVotingHandler:function(t){this.isCanVote=this.userTicketCount>0,this.starId=t,this.dialogShow(5,!0,{isCanVote:this.isCanVote,nums:this.userTicketCount})},ruleHandler:function(){this.dialogShow(2,!0)},myVoteCon:function(){this.dialogShow(3,!0)},videoPlay:function(t){this.dialogShow(6,!0,{src:t})},dialogShow:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.dialogOpations=s,this.isShowDialog=e,this.dialogType=t}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"m-voting-template"},[t.isShowDialog?i("Dialog",{attrs:{dialogType:t.dialogType,dialogOpations:t.dialogOpations},on:{isCloase:t.dialogClose,dialogListenEvent:t.dialogListenEvent,voteNumChange3:t.voteNumChange3}}):t._e(),t._v(" "),i("section",{staticClass:"u-vote-count"},[i("p",[t._v("当前")]),t._v(" "),i("p",[t._v("能量值")]),t._v(" "),i("p",[t._v(t._s(t.userTicketCount))])]),t._v(" "),i("header",[i("section",{staticClass:"g-video-container"},[i("section",{staticClass:"u-rule",on:{click:t.ruleHandler}}),t._v(" "),i("section",{staticClass:"u-myVoteCon-link",on:{click:t.myVoteCon}}),t._v(" "),i("section",{staticClass:"g-video-banner",on:{click:t.videoPlay}},[i("img",{attrs:{src:s("oybo"),alt:""}})])])]),t._v(" "),i("section",{staticClass:"g-myVoteCon",attrs:{id:"scroll"}},[i("section",{staticClass:"g-vote-msg"},[i("span",[t._v("\n                    已有\n                    "),i("i",{staticStyle:{"font-size":"0.3rem"}},[t._v(t._s(t.personCount))]),t._v("人次一起读书，领读官已送出\n                    "),i("i",{staticStyle:{"font-size":"0.3rem"}},[t._v(t._s(t.bookCount))]),t._v("本书\n               ")])]),t._v(" "),i("section",{staticClass:"g-vote-list"},[i("ul",{staticClass:"displayFlex flexWrap flexJustifybetween"},t._l(t.starSoltData2,function(e,s){return i("li",{key:s},[i("section",{directives:[{name:"scroll",rawName:"v-scroll",value:"star",expression:"'star'"}],staticClass:"g-vote-li"},[i("span",{directives:[{name:"preload",rawName:"v-preload",value:e.starPicUrl,expression:"item.starPicUrl"}],staticClass:"u-img",style:"background:url("+e.starPicUrl+");\n                                       backgroundRepeat:no-repeat;\n                                       backgroundSize:cover"}),t._v(" "),i("span",{staticClass:"u-vote-num"},[t._v("领读官 "+t._s(e.starName))])]),t._v(" "),i("section",{staticClass:"g-btn",on:{click:function(s){t.doVotingHandler(e.starId)}}},[i("span",{staticClass:"u-nums"},[t._v(t._s(e.ticketCount)+"阅读能量")])])])}),0)])]),t._v(" "),i("section",{staticClass:"g-myVote",attrs:{id:"rule"}},[t._m(0),t._v(" "),i("section",{staticClass:"g-vote-context"},[i("section",{staticClass:"g-vote-list"},[i("ul",{staticClass:"displayFlex flexJustifybetween flexAlignItemsCenter flexWrap"},[i("li",{staticClass:"displayFlex flexAlignJustifyCenter flexAlignItemsCenter"},[1==t.isFollow?i("span",{staticClass:"u-moman"}):t._e(),t._v(" "),i("span",{staticClass:"u-ticketbtn displayFlex flexAlignJustifyCenter flexAlignItemsCenter",on:{click:function(e){t.voteClick(1)}}},[i("span",{staticClass:"u-icon1"}),t._v(" "),i("span",{staticClass:"u-text"},[t._v("关注小程序能量+10")])])]),t._v(" "),i("li",{staticClass:"displayFlex flexAlignJustifyCenter flexAlignItemsCenter"},[1==t.isSignIn?i("span",{staticClass:"u-moman"}):t._e(),t._v(" "),i("span",{staticClass:"u-ticketbtn displayFlex flexAlignJustifyCenter flexAlignItemsCenter",on:{click:function(e){t.voteClick(2)}}},[i("span",{staticClass:"u-icon2"}),t._v(" "),i("span",{staticClass:"u-text"},[t._v("每日签到能量+10")])])]),t._v(" "),i("li",{staticClass:"displayFlex flexAlignJustifyCenter flexAlignItemsCenter"},[i("span",{staticClass:"u-ticketbtn displayFlex flexAlignJustifyCenter flexAlignItemsCenter",on:{click:function(e){t.voteClick(4)}}},[i("span",{staticClass:"u-icon4"}),t._v(" "),i("span",{staticClass:"u-text"},[t._v("阅读1本书能量+10")])])]),t._v(" "),i("li",{staticClass:"displayFlex flexAlignJustifyCenter flexAlignItemsCenter"},[i("span",{staticClass:"u-ticketbtn displayFlex flexAlignJustifyCenter flexAlignItemsCenter",on:{click:function(e){t.voteClick(3)}}},[i("span",{staticClass:"u-icon3"}),t._v(" "),i("span",{staticClass:"u-text"},[t._v("分享活动能量+10")])])])])])])]),t._v(" "),i("section",{staticClass:"g-star-bookList",attrs:{id:"star"}},[i("StarBook",{on:{videoPlay:t.videoPlay}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"u-myVote-tit diaplayFlex"},[e("span")])}]};var a=s("VU/8")(i,n,!1,function(t){s("JFT+")},"data-v-1390715a",null);e.default=a.exports},Zi8N:function(t,e,s){"use strict";Vue.directive("scroll",{inserted:function(t,e){t.addEventListener("click",function(t){var s=document.getElementById("touchFixed"),i=document.getElementById(e.value);s.scrollTop=i.offsetTop},!0)}})},bIjU:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{indexNum:1e4,starBookData:[],isBookList:!1,isClick:!1,changeList:[{src:"/static/images/meinv@2x.png",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",text:"“这里是我推荐书单这里是我推荐书单”",count:9999,bid:"10001"},{src:"/static/images/meinv@2x.png",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",text:"“这里是我推荐书单这里是我推荐书单”",count:8888,bid:"10002"},{src:"/static/images/meinv@2x.png",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",text:"“这里是我推荐书单这里是我推荐书单”",count:7777,bid:"10003"},{src:"/static/images/meinv@2x.png",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",text:"“这里是我推荐书单这里是我推荐书单”",count:6666,bid:"10004"},{src:"/static/images/meinv@2x.png",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",text:"“这里是我推荐书单这里是我推荐书单”",count:5555,bid:"10005"},{src:"/static/images/meinv@2x.png",video:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",text:"“这里是我推荐书单这里是我推荐书单”",count:4444,bid:"10006"}]}},components:{BookList:function(){return s.e(9).then(s.bind(null,"usx/"))}},methods:{getStarBook:function(t){var e=this,s={urls:"/starBookInfo/"+t,data:{},methods:"post",types:1,des:!1};this.isClick=!1,this.$http(s).then(function(t){200===t.data.code&&(e.starBookData=t.data.data.starList,e.isClick=!0)}).catch(function(t){})},booklist:function(){try{var t=this.indexNum-1e4,e=this.changeList[t].bid;console.log("did="+e),console.log("path:/booklistdetail/"+e),my.postMessage({event:"navigatorTo",data:{path:"/booklistdetail/"+e,query:{}}})}catch(t){}},videoPlay:function(){this.$emit("videoPlay",this.changeList[this.indexNum-1e4].video)},starChange:function(t){this.isClick&&(this.indexNum=1e4+t,this.getStarBook("1000"+t))},leftHandler:function(){1e4!=this.indexNum&&this.isClick&&(this.indexNum--,this.getStarBook(this.indexNum))},rightHandler:function(){10005!=this.indexNum&&this.isClick&&(this.indexNum++,this.getStarBook(this.indexNum))}},created:function(){this.getStarBook("10000")}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[t._m(0),t._v(" "),s("section",{staticClass:"g-star-book-conatiner"},[s("section",{staticStyle:{width:"100%",position:"relative"}},[s("section",{staticClass:"g-star-book-header",style:"background:url("+t.changeList[t.indexNum-1e4].src+");\n                    background-repeat:no-repeat;\n                    background-size:cover"},[s("span",{staticClass:"u-l",on:{click:t.leftHandler}}),t._v(" "),s("span",{staticClass:"u-play",on:{click:t.videoPlay}}),t._v(" "),s("span",{staticClass:"u-r",on:{click:t.rightHandler}})]),t._v(" "),s("section",{staticClass:"g-star-book-lists"},[s("section",{staticClass:"u-tit"},[s("span",[t._v(t._s(t.changeList[t.indexNum-1e4].text))])]),t._v(" "),s("section",{staticClass:"g-scroll-star"},[s("section",{staticClass:"g-scroll-star-box displayFlex flexAlignItemsCenter"},t._l(6,function(e){return s("section",{key:e,class:t.indexNum=="1000"+(e-1)?"u-box-item-active":"u-box-item-link",on:{click:function(s){t.starChange(e-1)}}})}),0)]),t._v(" "),s("section",{staticClass:"u-foot",on:{click:t.booklist}},[s("span",[t._v("书籍总数"+t._s(t.changeList[t.indexNum-1e4].count))]),t._v(" "),s("span",[t._v("查看详细书单")])])])]),t._v(" "),t.isClick&&null!=this.starBookData[0]?s("book-list",{attrs:{starBookData:t.starBookData}}):t._e()],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"u-star-tit"},[e("span")])}]};var a=s("VU/8")(i,n,!1,function(t){s("brtR")},"data-v-a291f322",null);e.default=a.exports},brtR:function(t,e){},mypn:function(t,e,s){(function(t,e){!function(t,s){"use strict";if(!t.setImmediate){var i,n,a,o,c,l=1,r={},u=!1,d=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){g(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,s=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=s,e}}()?t.MessageChannel?((a=new MessageChannel).port1.onmessage=function(t){g(t.data)},i=function(t){a.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(n=d.documentElement,i=function(t){var e=d.createElement("script");e.onreadystatechange=function(){g(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):i=function(t){setTimeout(g,0,t)}:(o="setImmediate$"+Math.random()+"$",c=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(o)&&g(+e.data.slice(o.length))},t.addEventListener?t.addEventListener("message",c,!1):t.attachEvent("onmessage",c),i=function(e){t.postMessage(o+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),s=0;s<e.length;s++)e[s]=arguments[s+1];var n={callback:t,args:e};return r[l]=n,i(l),l++},h.clearImmediate=m}function m(t){delete r[t]}function g(t){if(u)setTimeout(g,0,t);else{var e=r[t];if(e){u=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(s,i)}}(e)}finally{m(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,s("DuR2"),s("W2nU"))},oybo:function(t,e,s){t.exports=s.p+"static/img/toutu.86f8953.png"}});